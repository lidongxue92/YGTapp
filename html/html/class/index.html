<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge">
  <title>中央部门预算培训班</title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta content="yes" name="apple-touch-fullscreen">
    <!--此页面不会被浏览器缓存-->
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <!--此页面不会被浏览器缓存END-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="../../res/css/light7.min.css">
    <link rel="stylesheet" type="text/css" href="../../res/icon/iconfont.css">
    <link rel="stylesheet" href="../../res/swiper.min.css" type="text/css">
	<link rel="stylesheet" href="../../res/css/light7-swiper.css" type="text/css">
    <link rel="stylesheet" href="../../css/ypynewapp.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="../../res/styleApp.css">

</head>
<body>

<div class="page-group">
<!-- page 容器 -->
<div class="page  page-current" id="classhome">
 <!-- 标题栏 -->
  <header class="bar bar-nav">
    <a class="icon iconfont icon-shangyiye2 pull-left" onclick="api.closeWin()"></a>
    <a class="icon iconfont icon-saoma pull-right" onclick="saomiao()"></a>
    <h1 class="title" id="classname" >中央部门预算培训班</h1>
  </header>
<div class="bar bar-footer" id="signDetail">
  <a class="tab-item active pull-left" href="manual.html" style="line-height:2.2rem;font-size: 14px;">查看报名通知</a>
  <button class="button  button-fill button-danger pull-right">
    <a href="#" onclick="lijibaoming()"  style=" color:#fff;">立即报名</a>
  </button>
</div>
  <!-- 这里是页面内容区 -->
  <div class="content">
<div class="class_menu" id="classmenu" style="display:none">
	<div id="menu1" class="class_menu_icon"><a href="manual.html"><span><img src="../framework/czb/icon-21.png"></span>培训手册</a></div>
	<div id="menu2" class="class_menu_icon"><a href="personnel.html"><span><img src="../framework/czb/icon-22.png"></span>通讯录</a></div>
	<div id="menu3" class="class_menu_icon"><a href="paike.html"><span><img src="../framework/czb/icon-23.png"></span>课程安排</a></div>
	<div id="menu4" class="class_menu_icon"><a href="fenzu.html"><span><img src="../framework/czb/icon-24.png"></span>分组讨论</a></div>
	<div id="menu5" class="class_menu_icon" style="position: relative" ><a href="#" onclick="opendongtailist()"><span><img src="../framework/czb/icon-7.png"></span>班级动态</a>
    <span id="Tmessagesnumber" class="badge" style="position: absolute;top:0;right:10px;background: red;font-size: .6rem;      min-width: .8rem;
    height: .8rem; width:.8rem; overflow: hidden;padding: 0 .2rem;line-height: .8rem;color: white; display:none">1</span>
  </div>

	<div id="menu6" class="class_menu_icon"><a href="scheduling.html"><span><img src="../framework/czb/icon-27.png" ></span>出行住宿</a></div>
  <div id="menu7" class="class_menu_icon"><a href="picture.html"><span><img src="../framework/czb/icon-26.png"></span>班级相册</a></div>
	<div id="menu8" class="class_menu_icon "><a onclick="goInterlocution()"><span><img src="../framework/czb/icon-28.png"></span>作业交流</a></div>
  <div id="menu9" class="class_menu_icon " id="menuchatbtn" style="position: relative;" onclick="messagesetnumberhide()"><a href="#chat"><span><img src="../framework/czb/icon-29.png"></span>班级交流</a>
    <span id="chatnumber" class="badge" style="position: absolute;top:0;right:10px;background: red;font-size: .6rem;      min-width: .8rem;
    height: .8rem; width:.8rem; overflow: hidden;padding: 0 .2rem;line-height: .8rem;color: white; display:none">1</span></div>
  <div id="menu10" class="class_menu_icon "><a href="assessment.html"><span><img src="../framework/czb/icon-210.png"></span>教学评估</a></div>

</div>
<!--
<div class="newhome_newlist" style="">
		<div class="newlist_title">通知</div>
		<div class="newlist_text" id="rollText">
			<div><A target="_blank"  HREF="http://www.newstartsoft.com/Html/8af1702e-e96a-4e52-adf9-aa7e85459215.html">线上和线下培训都有哪些区别呢？</A><br />
<a href="#">最新开班通知，请尽快报名！</a><br />
<a href="#">最新专题课程上线通知，积极学习！</a>
		</div></div>
		<div class="newlist_more">更多</div>
	</div>
-->

  <div class="shijiandizhi" id="shijiandizhi">
<i class="iconfont icon-dizhi"></i>课程地址：培训基地（北京市西城区三里河河南三巷3号）<a href="#" onclick="getmap()">[查看地图]</a><br />
<i class="iconfont icon-shijian"></i>培训时间：2019年6月15日至20日(5天)<br />
<i class="iconfont icon-ai-users"></i>报名人数：99人/100人
</div>

 <div class="content-block" style="margin: 0.75rem 0;" id="classabout">
 <center><h3>班级简介</h3></center>
	       2018年财政部西部地区地（市、州、盟）财政局长培训班在上
海财经大学成功举办。本期培训班开展了推进西部地区财政工作改
革创新、《预算法》修订与实施、现代国家治理与财政法治化、
贫开发和乡村振兴等系列专题教学，组织了与上海财政局有关负责
同志的经验座谈，开展了“如何当好财政局长”“推进西部地区深
化财税体制改革”专题研讨，组织了上海大数据中心、生态农业项
目的现场教学。来自西部地区的71名地（市、州、盟）财政局长参
  </div>
</div>



  <div class="page" id="chat">
    <header class="bar bar-nav">
      <a class="icon iconfont icon-shangyiye2  pull-left back" onclick="chatgohome()" href='/app/class/index.html'></a>
      <h1 class="title">班级交流</h1>
    </header>
    <div class="bar bar-footer">
      <span class="pull-left">
        <input type="text" id="chat_send_input" name="" placeholder="请输入聊天文本" style="margin: 5px;
        line-height: 28px; height:28px;
        width: 270px;
        border: 1px #ddd solid;
        padding-left: 10px;"></span>

      <a href="#" id="chat_send_btn" class="button button-fill pull-right" style="line-height: 28px; height:28px;margin-top:-2px">发送</a>
    </div>
    <div class="content">
      <div class="content-padded" id="chat_text">
          <div style=" text-align:center; padding:5px; border-radius:3px; background-color: #ddd; font-size:12px; ">仅限打开班级主页的人员可以看到消息</div>
      </div>
    </div>
  </div>

</div>
<!-- popup, panel 等放在这里 -->
<div class="panel-overlay"></div>
<div class="popup popup-about" style="top:0">
<header class="bar bar-nav">
<a class="icon iconfont icon-shangyiye2 pull-left  close-popup" onclick=""></a>
  <h1 class="title">查看地图</h1>
</header>
  <div class="content-block" style="padding:0">
    <div id="allmap" style="width: 100%;height:100%; position: absolute;"></div>
  </div>
</div>

<!--这是班级动态详情，和公告的弹框-->
<div class="popup popup-services" >
   <a class="pull-right close-popup" data-popup=".popup-services" onclick="" style="padding: .5rem;">
        <i class="iconfont">&#xe6b9;</i>
      </a>
  <div class="content-block" style=" margin-top:2.5rem;">
    <p style=" text-align:center;" class="msg_title"></p>
    <p style=" text-align:right;"><a class="msg_date"></a></p>
    <p class="msg_content"></p>
    <p class="msg_button_baoming close-popup" data-popup=".popup-services" style=" display:none;" >
        <a href="signup.html" class="button button-fill" style="height: 1.5rem;line-height: 1.5rem;">立即报名</a>
    </p>
  </div>
</div>

<script src="../../res/zepto.min.js" type="text/javascript"></script>
<script type='text/javascript' src='../../res/js/light7.min.js' charset='utf-8'></script>
<script type='text/javascript' src='../../res/js/i18n/cn.min.js'></script>
<script type='text/javascript' src='../../res/js/light7-swiper.js' charset='utf-8'></script>
<script src="../../res/js/jquery-1.10.2.min.js" type="text/javascript"></script>
<script type='text/javascript' src="../../res/config.js" ></script>

<script type="text/javascript" src='../../res/pdf2/Base64.js' charset='urf-8'></script>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=83f0062b970c05a64e80e0a93a5cbb21"></script>
<script type="text/javascript" src='../../res/common.js' charset='urf-8'></script>
<script type="text/javascript" src='../../res/HomeApiReady.js' charset='urf-8'></script>
<script type='text/javascript' src="paike.js"></script>
<script type='text/javascript' src='manual.js' charset='utf-8'></script>
<script type='text/javascript' src='personnel.js' charset='utf-8'></script>
<script type='text/javascript' src='scheduling.js' charset='utf-8'></script>
<script type='text/javascript' src="kaoqin.js"></script>
<script type='text/javascript' src="baodao.js"></script>
<script type='text/javascript' src='picture.js' charset='utf-8'></script>
<script type='text/javascript' src='fenzu.js' charset='utf-8'></script>
<script type='text/javascript' src='assessment.js' charset='utf-8'></script>
<script type='text/javascript' src='classdynamics.js' charset='utf-8'></script>
<script type='text/javascript' src='../wenjian/index.js' charset='utf-8'></script>
<script type='text/javascript' src='../../res/AppStudy.js' charset='utf-8'></script>
<script src="../../res/icon/iconfont.js" type="text/javascript"></script>

<script type='text/javascript' src="../interlocution/interlocution.js"></script>
<script type='text/javascript' src="../peixun/buylist.js"></script>
<script type='text/javascript' src="../peixun/train.js"></script>
<script type='text/javascript' src="../peixun/course.js"></script>
<script type='text/javascript' src="../peixun/detail.js"></script>
<script type='text/javascript' src="../peixun/questionnaire.js"></script>


<script type='text/javascript' src="../../script/chatroom.js"></script>
<script type='text/javascript'>
  $.config = {
    autoInit: true //no recommend
  }
  apiready = function(){
  	//	$("body").css("margin-top",api.safeArea.top+"px");
      //$(".popup").css("margin-top",'-'+api.safeArea.top+"px");
      api.setStatusBarStyle({
         style: 'dark',
         color: 'rgba(0,0,0,0.0)'
      });
  }
  $(function(){
    //链接通讯服务
    var user = getUserInfo();
    var classObj = GetlocalStorage("classObj");
    //console.log(JSON.stringify(classObj));

    var chatshow = true;//是否显示聊天窗口
    if(classObj.gradeSwitch != undefined){ //菜单权限
        var menuobj = JSON.parse(classObj.gradeSwitch);
        for(var i=0;i<menuobj.length;i++)
        {
            //alert(JSON.stringify(classObj.gradeSwitch[i]));
            if(menuobj[i].isSel == false)
            {
              $("#menu"+menuobj[i].id).hide();
            }
            if(menuobj[i].id == 9 || menuobj[i].id == "9"){
              chatshow = false;
            }
        }
    }

    //查询是否报名过
    getAjax(javaserver + "/grade/findGradeEnroll", { userid:user.user_ID,gradeid:classObj.gradeId}, function (data) {
          data = JSON.parse(data);
          if(data.errorcode == "0"){
            if(data.data!=undefined){
              SetlocalStorage("gradeenroll",JSON.stringify(data.data));

              if(data.data.reviewed == "1" ||data.data.reviewed == 1 ) //报名审核中
              {

                $("#signDetail button").html("审核中");
              }
              else if(data.data.reviewed == "2") //报名成功
              {
                //  alert(chatshow);
                //链接通讯服务器,IM
                if(!chatshow)
                {

                  jisuchatroom_setUser(user.user_ID,user.user_Name,user.user_Img,classObj.gradeId);
                }
                $("#chat_send_input").css("width",document.body.clientWidth-100+"px");
                $("#classmenu").show();
                $("#signDetail").remove();
                classObj.signState="0";
              }
              else {//报名成功
                $("#signDetail button").html("<font color=red>审核失败</font>");
              }


    				}
            classObj.state=data.errormsg;
            SetlocalStorage("classObj",JSON.stringify(classObj));
          }else{
            console.log('查询是否报名失败！');
            classObj.signState="1";
            SetlocalStorage("classObj",JSON.stringify(classObj));
          }
      });

    if(classObj.gradeName.length>15)
    {

        $("#classname").click(function(){
            api.toast({
                msg: classObj.gradeName,
                duration: 5000,
                location: 'top'
            });
        });
        $("#classname").html(classObj.gradeName.substring(0,15)+'..');

    }
    else {
      $("#classname").html(classObj.gradeName);
    }

    if(classObj.gradeType==0){
          $("#shijiandizhi").html("<i class='iconfont icon-dizhi'></i>班级类型：线上课程 <br /><i class='iconfont icon-ai-users'></i>报名人数："+(classObj.hadEnrolment==undefined?'0':classObj.hadEnrolment)+"人/"+(classObj.enrolment==undefined?0:classObj.enrolment)+"人");
      }else{
          //$("#signDetail .class_menu").children().eq(0).remove();
          var xinxi ="";
          if(classObj.address!=undefined && classObj.address != "")
          {
            xinxi+=("<i class='iconfont icon-dizhi'></i>课程地址："+(classObj.address==undefined?'暂无':classObj.address)+"<a href='#' onclick=\"getmap('"+classObj.address+"')\">[查看地图]</a><br />");
          }
          if(classObj.enrollStartDate!=undefined)
          {
              xinxi += ("<i class='iconfont icon-shijian'></i>报名时间："+classObj.enrollStartDate+'<br />');
          }
          if(classObj.enrollEndDate!=undefined)
          {
                xinxi += ("<i class='iconfont icon-shijian'></i>报名截至："+classObj.enrollEndDate+'<br />');
          }
          if(classObj.enrolment == undefined || classObj.enrolment == "0" || classObj.enrolment == 0)
          {
            classObj.enrolment  ="不限";
          }
          xinxi += ("<i class='iconfont icon-shijian'></i>培训时间："+(classObj.lineStartDate==undefined?'暂无':classObj.lineStartDate)+"("+(classObj.gradeDuration==undefined?0:classObj.gradeDuration)+"天)<br /><i class='iconfont icon-ai-users'></i>报名人数："+(classObj.hadEnrolment==undefined?'0':classObj.hadEnrolment)+"人/"+(classObj.enrolment==undefined?0:classObj.enrolment)+"人");
          $("#shijiandizhi").html(xinxi);
      }
      $("#classabout").html("<center><h3>班级简介</h3></center>"+classObj.gradeIntroduce);
      //alert(classObj.gradeIntroduce.replaceAll("\n", "<br/>");
    //  $("#iframesign").attr("src","../wenjuan/wenjuan_info.html?key="+classObj.id);


    //查询基地信息
    if(classObj.trainbaseId != "")
    {


      console.log('培训基地'+classObj.trainbaseId+','+user.organization_ID);
      //查询基地详细信息
        getAjax(javaserver+'/trainbase/findTrainbase',
        {
          trainbase_id:classObj.trainbaseId,
          orgid:user.organization_ID,
          powerLV:'2',
          pageIndex:1,
          pageSize:20
        },function(rs){
            //alert(rs);
            var data = JSON.parse(rs);
            if(data.datas != undefined && data.datas.length >0)
            {
              //查出基地名，点击基地名册后，显示基地信息。
              var popupHTML = ('<div class="popup peixunjidi">'+
                            ' <a class="pull-right close-popup"  onclick="" style="padding: .5rem;"><i class="iconfont">&#xe6b9;</i></a>'+
                            '<div class="content-block">'+
                              '<p>城市：'+data.datas[0].trainbase_city+'</p>'+
                              '<p>地址：'+data.datas[0].trainbase_address+'</p>'+
                              '<p>总务台：'+data.datas[0].trainbase_reception_cell+'</p>'+
                              '<p>商务中心：'+data.datas[0].trainbase_business_cell+'</p>'+
                              '<p>房务中心：'+data.datas[0].trainbase_house_cell+'</p>'+
                              '<p>WIFI密码：'+data.datas[0].trainbase_wifi_pwd+'</p>'+
                              '<p>基地介绍：'+data.datas[0].trainbase_introduce+'</p>'+
                            '</div></div>');
              //console.log(popupHTML);
              $("body").append(popupHTML);
              $("#shijiandizhi").append("<br /><i class='iconfont icon-qiye'></i>培训基地：<a href='#' onclick=\"$.popup('.peixunjidi')\">"+data.datas[0].trainbase_name+"<a>");
              var city = data.datas[0].trainbase_city;

              if(classObj.lineStartDate != undefined && classObj.trainbaseId != "")
              {
                var data = new Date(Date.parse(classObj.lineStartDate.replace(/-/g, "/")));
                var nowdata  = new Date();
                var days = data.getTime() - nowdata.getTime();
                var time = parseInt(days / (1000 * 60 * 60 * 24));
                if(time >=0 && time <6)
                {

                  //查询基地天气
                  $.get("https://www.sojson.com/open/api/weather/json.shtml",{
                    city:city
                  },
                  function(data){
                      try {
                      var obj = strToJson(data);
                      var tianqi = obj.data.forecast[time+1];
                      if(tianqi != undefined)
                      {
                        console.log(JSON.stringify(tianqi));
                        var tianqihtml ="";
                        if(tianqi.type =="晴")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_01.png' width='20' />";
                        }
                        else if(tianqi.type =="多云")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_04.png'  width='20' />";
                        }
                        else if(tianqi.type =="阴")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_18.png'  width='20' />";
                        }
                        else if(tianqi.type =="阵雨")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_07.png' />";
                        }
                        else if(tianqi.type =="小雨")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_07.png' />";
                        }else if(tianqi.type =="中雨")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_08.png' />";
                        }else if(tianqi.type =="大雨")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_09.png' />";
                        }else if(tianqi.type =="暴雨")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_09.png' />";
                        }
                        else if(tianqi.type =="雷阵雨")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_10.png' />";
                        }
                        else if(tianqi.type =="雾" || tianqi.type =="霾" || tianqi.type =="雾霾")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_24.png' />";
                        }
                        else if(tianqi.type =="冰雹")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_11.png' />";
                        }
                        else if(tianqi.type =="雨夹雪")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_15.png' />";
                        }
                        else if(tianqi.type =="小雪")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_11.png' />";
                        }else if(tianqi.type =="中雪")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_12.png' />";
                        }else if(tianqi.type =="大雪")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_13.png' />";
                        }else if(tianqi.type =="暴雪")
                        {
                            tianqihtml += "<img src='../../images/weathy/weathy_14.png' />";
                        }
                        else{
                            tianqihtml += "";
                        }
                        tianqihtml += "培训天气：<b>"+ tianqi.date+'</b>'+tianqi.type+"("+tianqi.low+"-"+tianqi.high+")"+tianqi.notice;

                        $("#shijiandizhi").append("<br /><marquee direction=left scrollamount=6 onmouseover=\"this.stop()\" onmouseout=\"this.start()\">"+tianqihtml+"</marquee>");
                      }
                    } catch (e) {

                    } finally {

                    }
                  })
                }

              }
            }
        });
    }

  //  alert(sysUserInfo.user_ID+",,"+classObj.gradeId);
    //查询新消息
    getAjax(javaMsg + "/MessageCenter/findUnreadNun",
    { recipientId: user.user_ID,
      xid:classObj.gradeId
    },
    function (data) {
        //alert(data);
        data = strToJson(data);
        if(data.errorcode == "0")
        {
          if(data.data >0)
          {
            if(data.data >99)
            {
              data.data = 99;
            }
            $("#Tmessagesnumber").text(data.data).show();
          }
          else {
            $("#Tmessagesnumber").hide();
          }
        }

    });
  })


  function getmap(dizhi){
  //  $.popup('.popup-about');
  //  var map = new BMap.Map("allmap");
  //  map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);
  //  var local = new BMap.LocalSearch(map, {
  //    renderOptions:{map: map}
  //  });
  //  local.search(dizhi);
  api.openWin({
      name: 'disanfang',
      url: api.wgtRootDir+"/html/iframe.html",
      animation:{type:"movein" ,subType:"from_bottom", duration:300  },
      pageParam: {
          title:'地图展示',
          url: 'class/map.html?dizhi='+escape(dizhi)
      }
  });

}
   //班级交流跳转问答
function goInterlocution() {
    var classObj = GetlocalStorage("classObj");
    var obj = {};
    obj.columnId = "";
    obj.xtype = 5; //班级
    obj.xid = classObj.gradeId; //这是班级id
    obj.xname = classObj.gradeName; //这是班级名称
    obj.title = "作业交流"; //这是

    //虚拟一个专栏，给问答列表（列表已做好判断）
     SetlocalStorage("SpectailColnum", JSON.stringify(obj));
     $.router.loadPage(api.wgtRootDir+"/html/interlocution/interlocution.html");
};
//在线报名
function lijibaoming(){
  $.showPreloader();

  var classObj = GetlocalStorage("classObj");
  	getAjax(javaserver + "/grade/gradeEnroll", { userid:getUserInfo().user_ID,gradeid:classObj.gradeId}, function (data) {

      data = JSON.parse(data);
    if(data.errorcode == "0"){
        if(classObj.isExamine)
        {
          alert('报名成功！等待审核中');
          classObj.signState="0";
          SetlocalStorage("classObj",JSON.stringify(classObj));
  			    $("#signDetail button").html("审核中");
        }
        else {
          alert('报名成功！欢迎加入！');
          classObj.signState="0";
          SetlocalStorage("classObj",JSON.stringify(classObj));
          $("#classmenu").show();
  			  $("#signDetail").remove();
        }

      }else if(data.errorcode == "74"){
                  alert('正在审核中，请耐心等待！');
  				$("#signDetail button").remove();
              }else if(data.errorcode == "75"){
                  alert('您已经报过名了！');
  				$("#signDetail button").remove();
              }else if(data.errorcode == "71"){
                alert('班级不存在！');
  				$("#signDetail button").remove();
              }else if(data.errorcode == "72"){
                  alert('用户不存在！');
  				$("#signDetail button").remove();
              }else if(data.errorcode == "73"){

                  alert('未到开始时间！');
              }else if(data.errorcode == "76"){
                  alert('报名审核失败！');
              }
              else if(data.errorcode == "77"){
                  alert('报名已过截至日期');
              }
              else {
                alert("报名失败"+data.errorcode);
              }
              $.hidePreloader();
      });
}
$(document).on("pageInit", "#classhome", function (e, id, $page) {
  console.log('回到首页');
});
$(document).on("pageInit", "#chat", function (e, id, $page) {
	console.log('聊天界面');
})
var messagesnumber =0;
function messagesetnumber(){
  messagesnumber++;
  if(messagesnumber >0){
    $("#chatnumber").html(messagesnumber).show();
  }
}
var messagetype =0;//0为首页状态，1为聊天页
function messagesetnumberhide(){
  messagetype=1;
  $("#chatnumber").hide();
}
function chatgohome(){
  messagetype=0;
}
function opendongtailist(){
  var classObj = GetlocalStorage("classObj");
  localStorage.setItem("classiddongtai",classObj.gradeId);
  $.router.loadPage("classdynamics.html");
}
String.prototype.replaceAll = function(s1,s2){
return this.replace(new RegExp(s1,"gm"),s2);
}
</script>

</body>
</html>
